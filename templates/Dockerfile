#
# Do not change content here, image automatically built
#
FROM ${BUILD_DOCKERFILE_IMAGE}

ARG BUILD_COMMIT
ARG BUILD_DATE

${DOCKERFILE_BUILDER_ENVVARS}

RUN if [ ! -d "${DOCKERFILE_BUILDER_PATHS_DOCKERFILE_FOLDERS_SETUP}" ]; then \
        mkdir -p ${DOCKERFILE_BUILDER_PATHS_DOCKERFILE_FOLDERS_SETUP}; \
    fi \
    && \
    if [ ! -d "${DOCKERFILE_BUILDER_PATHS_DOCKERFILE_FOLDERS_CONFIG}" ]; then \
        mkdir -p ${DOCKERFILE_BUILDER_PATHS_DOCKERFILE_FOLDERS_CONFIG}; \
    fi

${DOCKERFILE_BUILDER_IMPORTS}

RUN chmod +x -R ${DOCKERFILE_BUILDER_PATHS_DOCKERFILE_FOLDERS_BIN} && \
    sync && \
    ${DOCKERFILE_BUILDER_PATHS_DOCKERFILE_SETUP} 1>/dev/stdout 2>/dev/stderr

${DOCKERFILE_BUILDER_PORTS}
${DOCKERFILE_BUILDER_WORKDIR}

ENTRYPOINT ["/bin/sh", "-c"]
${DOCKERFILE_BUILDER_CMD}

LABEL \
    org.label-schema.vcs-ref=$BUILD_COMMIT \
    org.label-schema.vcs-url="https://github.com/AlphaSocket/dockerized-${TEST_DOCKERFILE_TAG_NAME}"